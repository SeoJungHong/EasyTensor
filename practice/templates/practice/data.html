{% extends 'practice/base.html' %}
{% load staticfiles %}

{% block content %}
<div class="row">
  <br>
  <h3>Load Example Data</h3>
  <br>
  <h4>Training Image&Lable</h4>
  <button onclick="loadData()">Load data</button>
  <li>
    <h3>Detail</h3>
    <div class="slideshow">
      <img src="http://placehold.it/500x100/0000CD&text=1" width="500" height="100" alt="first image">
      <img src="http://placehold.it/500x100/008000&text=2" width="500" height="100" alt="second image">
      <img src="http://placehold.it/500x100/B22222&text=3" width="500" height="100" alt="third image">
      <img src="http://placehold.it/500x100/F4A460&text=4" width="500" height="100" alt="fourth image">
      <p style="position:absolute;bottom:0;right:0;">
        <button id="prevSlide">Prev</button>
        <button id="nextSlide">Next</button>
      </p>
    </div>
  </li>
</div>
<br><br>
<div>
  <button id="nextButton" disabled>Next</button>
</div>

<script>
  function loadData() {
    $.post("/{{ practice_name }}/data/",
        function (data) {
          alert("Data Loaded");
          $('#nextButton').attr('disabled', false);
        },
        "json"
    );
  }

  $('#nextButton').click(function () {
    location.href = '/{{ practice_name }}/algorithm'
  });

  var interval = undefined;
  $(document).ready(function () {
    interval = setInterval(getFirst, 2000); // milliseconds
    $('#nextSlide').on('click', getNext);
    $('#prevSlide').on('click', getPrev);
  });

  function getFirst() {
    var $curr = $('.slideshow img:visible').first();
    $curr.css('z-index', 1);
  }

  function getNext() {
    var $curr = $('.slideshow img:visible'),
        $next = ($curr.next('img').length) ? $curr.next() : $('.slideshow img').first();
    transition($curr, $next);
  }

  function getPrev() {
    var $curr = $('.slideshow img:visible'),
        $next = ($curr.prev('img').length) ? $curr.prev() : $('.slideshow img').last();
    transition($curr, $next);
  }

  function transition($curr, $next) {
    clearInterval(interval);
    $next.css('z-index', 2).fadeIn('slow', function () {
      $curr.hide().css('z-index', 0);
      $next.css('z-index', 1);
    });
  }
</script>
{% endblock content %}

{% block scripts %}
<script>
  $(document).ready(function() {
    var cur= window.location.pathname;
    if(cur.indexOf('data')){
      $('.submenu').hide();
      $('#data.submenu').show();
    }
    $('.data-end').attr('src','{% static 'practice/images/end_exec.png' %}');
    $('#data-1').parent().next().children().css('font-weight','Bold');
    $('#data-1').parent().next().children().css('font-size','17px');
    $('#data').prev().children().css('color','#d50f25');
  });
</script>
{% endblock scripts%}
